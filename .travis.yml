language: node_js
node_js:
- 8.9.0
env:
  global:
    - GH_REF: github.com/roy-k/bolg.git
    - secure: "k7/6Kd40yN+yIu5KFFJ+AqtqofFlnzZrdaw+hbvAovYPgb4oFAY4dtQukiep1iKkvEE18L42F33pNPFKROrmLcqPEEpcQtyGu41/5Zwd6F/0R8W11NUCiMNnn/c+MC5jCcIbBoUUHOoJJJnKILyOPZRDNpxExCmF+6Tk52aDI6Z6sMgZTh/PhH63ejq8LY4/0fye/NhpI4vs8ZEmQzpatvi5zB41HR+sIbnka1wug4OtqXeQAbzyp5kxrYdkvlWsaIFAx/wqLxJWqf5DkXyPiQ469TxS1Dgze+wW21v6WF5JnrBHRb3qoYsNMe9GsSNF1y5sB9ksgf06scpiiftvjPOL5QthBmZBjP7ZHYyG3bAKFVGVGnOr7hwoouoOmKkYa4bu5TW9+N/8cxQQGGNZi49bUKSaTbjgvSsc8QbbF8SFb3Ra+dFAFAsdRucYP+Rw2D0Olu0OjB5/0E0fHVoC1yvOvYH3hHuekeKhmr1gK+xvla27xs3k7m0UAojxK1epId0F8nAfGUAe4MTqV7GS2hVYVcG/Lk7kprrX8ryiVVkKBWUSkdY9P9VdDsB8Deh/wLhZt47GByIYpuxdd+5zAcd4KknZuIyZIpK6hjQ8rp9urwTqD+0dPjIMAsQiiW72/9/R117nZ4NQc8RaCG5HUZQoexbIRmXGs0Bxk6VGN+0="

install:
  - npm install
before_script:
  - npm install -g hexo
script:
  - hexo g
after_script:
  - cd public
  - git init
  - git config user.name "roy"
  - git config user.email "roy.k.gao@gmail.com"
  - git add .
  - git commit -m "Update docs"
  - git push -f "https://${GH_TOKEN}@${GH_REF}" master:gh-pages
